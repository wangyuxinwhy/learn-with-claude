use text_diversity::{pairwise_jaccard_diversity, distinct_n, self_bleu_diversity};

fn main() {
    let haiku = vec![
        "唐朝 618-907年 是 中国 古代 最 璀璨 的 朝代 之一 经济 繁荣 文化 昌盛 诗人 众多 如 李白 杜甫 等 政治 开明 科举 制度 发达 疆域 辽阔 与 周边 民族 交往 频繁 成为 东亚 文明 中心 对 后世 影响 深远",
        "唐朝 618-907年 是 中国 历史 上 最 繁荣 的 王朝 之一 政治 制度 完善 经济 文化 发达 是 诗歌 绘画 的 黄金 时代 对外 贸易 活跃 丝绸之路 繁荣 国力 强盛 影响 深远",
        "唐朝 618-907年 是 中国 历史 上 最 繁荣 的 封建 王朝 之一 政治 制度 先进 经济 发达 文化 灿烂 诗歌 书法 绘画 等 文化 艺术 成就 突出 对外 交流 频繁 是 丝绸之路 的 黄金 时代 国力 强盛 疆域 辽阔 被誉为 中华 文明 的 高峰",
        "唐朝 618-907年 是 中国 古代 最 繁荣 的 王朝 之一 政治 统一 经济 发达 文化 昌盛 诗歌 绘画 雕塑 等 艺术 成就 卓越 对外 贸易 频繁 通过 丝绸之路 与 西方 往来 密切 国力 强盛 疆域 辽阔 影响力 深远",
        "唐朝 618-907年 是 中国 历史 上 最 繁荣 的 朝代 之一 政治 清明 经济 发达 文化 昌盛 诗歌 绘画 书法 等 艺术 成就 斐然 对外 贸易 发达 丝绸之路 繁荣 是 中华 文明 的 黄金 时代",
    ];

    let sonnet = vec![
        "唐朝 618-907年 是 中国 历史 上 最 繁荣 强盛 的 朝代 之一 由 李渊 建立 政治 开明 经济 发达 文化 璀璨 诗歌 成就 尤为 突出 疆域 辽阔 对外 交流 频繁 是 当时 世界 上 最 强大 的 国家 之一",
        "唐朝 618-907年 是 中国 历史 上 最 辉煌 的 封建 王朝 之一 政治 开明 经济 繁荣 文化 灿烂 疆域 辽阔 诗歌 书法 绘画 等 艺术 达到 巅峰 长安 成为 国际 大都市 对外 交流 频繁 影响 深远",
        "唐朝 618-907年 是 中国 历史 上 最 强盛 的 朝代 之一 由 李渊 建立 定都 长安 经济 繁荣 文化 昌盛 对外 开放 诗歌 艺术 达到 巅峰 出现 李白 杜甫 等 伟大 诗人 对 周边 国家 影响 深远",
        "唐朝 618-907年 是 中国 历史 上 最 强盛 的 朝代 之一 由 李渊 建立 经济 繁荣 文化 灿烂 诗歌 成就 卓著 对外 开放 包容 丝绸之路 畅通 首都 长安 是 当时 世界 最大 都市 影响 深远",
        "唐朝 618-907年 是 中国 历史 上 最 强盛 的 朝代 之一 由 李渊 建立 政治 开明 经济 繁荣 文化 灿烂 诗歌 书法 绘画 达到 巅峰 对外 交流 频繁 长安 成为 国际 大都市 影响 深远",
    ];

    let opus = vec![
        "唐朝 618-907年 是 中国 历史 上 最 强盛 的 朝代 之一 以 开放 包容 著称 政治 清明 经济 繁荣 文化 灿烂 诗歌 艺术 达到 巅峰 丝绸之路 促进 了 中外 交流",
        "唐朝 618-907年 是 中国 历史 上 最 强盛 的 朝代 之一 以 开放 包容 著称 都城 长安 为 当时 世界 最大 城市 文化 艺术 繁荣 诗歌 达到 巅峰 丝绸之路 贸易 兴盛",
        "唐朝 618-907年 是 中国 历史 上 最 强盛 的 朝代 之一 以 开放 包容 著称 政治 清明 经济 繁荣 文化 灿烂 诗歌 艺术 达到 巅峰 丝绸之路 贸易 兴盛 对 东亚 文明 影响 深远",
        "唐朝 618-907年 是 中国 历史 上 最 辉煌 的 朝代 之一 以 开放 包容 文化 繁荣 著称 长安 为 当时 世界 最大 城市 诗歌 艺术 科技 均 达 巅峰 丝绸之路 贸易 繁盛",
        "唐朝 618-907年 是 中国 历史 上 最 强盛 的 朝代 之一 以 开放 包容 经济 繁荣 文化 昌盛 著称 诗歌 艺术 达到 巅峰 丝绸之路 贸易 兴盛 对 东亚 文明 影响 深远",
    ];

    println!("=== 模型输出多样性对比 ===\n");
    
    print_metrics("Haiku", &haiku);
    print_metrics("Sonnet", &sonnet);
    print_metrics("Opus", &opus);
}

fn print_metrics(model: &str, responses: &[&str]) {
    println!("[{}]", model);
    println!("  Pairwise-Jaccard: {:.3}", pairwise_jaccard_diversity(responses));
    println!("  Distinct-1:       {:.3}", distinct_n(responses, 1));
    println!("  Distinct-2:       {:.3}", distinct_n(responses, 2));
    println!("  Self-BLEU:        {:.3}", 1.0 - self_bleu_diversity(responses, 4));
    println!();
}
